language: node_js
node_js:
- '8'
env:
  global:
  - secure: CTLkajlm1+h1VybKvB0ru5kA1vNUrKYqC247FTgtmpc9Fd6pQm1ffd53isbWvA2gpN8zqTM2uqQZjscrIouN3AteK6UiyaOhZGPYlXtyoimjjJF+bnMlE6cm5My9QiP0QjqUjzBCUVZxPSDCoeiE4efBLEVpZ4Ng9VfcTP7e0RewG6Jzj4p6c4SxhqKCymu3Nk3WWCLcncNt2aH9TnCvV/j1tv61IoAZ1bgW8wzXt60uPB+GV+O/e5M5F7RXX7bp9+mjfq/wtHkEnC27w4c8zBFEp0HhrJKILpTq2gDY/Wvu3soASGfyfHIOB12rU6AGodSfJvep9hDQBu/3RHXRPILDnugWKw+XszIrY68yby6TqdRGFAbhNZ564y6FgMq7vvAXcVjbhT5mjM+jNW0FWaIqKTDcFFGl2IkGWq/DnjHo6/mgjZenA2cJW8ehxkw1p1wpp10ZutOzDJ/QDf91CTxUELmEvBsdg6lC7OfnRQpXEINNVNNxpnhQibpCLdirecXY7eCMIGcbUbuZXGAXeFFeu/ByUujGYbp5PYvF9qUDXRIllMwe66aOlfTZYH3YsQm2KDST7F6bOx3kMqd+7sDirLHDVg5jrJaBHkQg2GW1r2Db77eloub198Ori4pzO1fuVpaEcjnBsGJ6ua1cZ/63gIaDL2m4sY7ZR61SUls=
  - secure: mkFWkLJvv5f/ElYK0dlWpQ/XAKJI04UkaCqpvqrXoPb0aZ2ZwQs5Z3XEIVNr9ZeljJPuYjF+1KEo9s7Gdlf2rT6NtfzsRybIM9qzlsbIsLtBSFna3rGJCHEkCCpZRh1HF4/9NwL8LHb82BAyNx7xnJwgbviWGnBhUlHvU0uqUmzcsZXGhfxANA4w6MW8HILw4abOqmozb74oVt2/gR/qlsReJpCL2XWX1I5apz9HPnyO8WzYmUCdmg7A5LyZ+A5O/xRHfNlkrNZMqEwPYNc9d0YNtsRQmH4OT0BhxngwPjyhZZKd5ZaS7sMuk8G9y98QQ+3nUYjBYj4EOpBgAjJ1t2yx+iWvdgRzxjSBqS2PbRjTFSybqUEor0eRbD3WrQWwKS8DQjiZtlELf8cp80/Uaiq0X4IMF0IELE4sEI+w7hQcd5B/B2qBwz7LOknQwQEDB011IgXdLNF2LHURDKO4LPZvJOpl4hn1v9tti7pU6iw4pO+nKSzhdMP2UMIW6UIsw9G0K6yeyV2eJ3/psu2tpOCo4Xzk2NXut8RkT1NlD8fYEDoqG0VU+SbtGdyHNoEo2sELIxE7CDghdXBIKHW9cmlgDKLP14xKI0dGkbFwte05BcYQByyqy2ZDql3z7NcqEKLw1hOO/Uq78XQvqPi+1qt6QCmtAeKDk0nJjHdamYI=
  - secure: De+bJuuEVOoOppH/JwBQFjRfzaxL3JjVnIkanxpwYcTZYLfFClzfbHmzVsRW5UIy+KlGxf90Ytn10ZXTrtYWsfQqthaA7N3vDArf/f1xCIzlOhtkaZL+ZINcVP4EOeYj9SfEeU1W2L3AhetpuV7aSgVRrDvnhIR5fFhQ15CMorUkAi2bAT6OGEjuIz/+W2MJfzlPc343G67jrb39cp1U0yLfGg5MMRzMVfuAymE69LQDpmVRCEW8my9E9zhBvGq5FH1WmhDN6hHbc9SbUNgESDHda91vjZJugLP2dY1Zyig5HR+eo7Pj/M/nPZTyIvnyoV9MD7OM6ausg64SLvcvZgcuXlYSUt1IJ+/n6hD4fgnG8eBk/g0jaDU/CjTFvCrQQ4OeTVkSm4nTCZVhvONsNGyYiBCvLrgaJVAjcFaqArQW2Z5F7vojwzJkwMZ2hgH1GlX6wtH4/7hG/dS/EmqtgC4ZHL7wACy5e5lDxoM9zGhu86/quVMBrfnDDV9e/SOHBOUENefAR/ULVAbmGp+y6Kc6m6cF4Y53BxShn1F0iCZzkpW9HE9thXNk8trSmdMMiQTQ0z5mPol8B7iYeUMt9ht5C91Ri3Y02wV8k/FGvzH4eyQIv+9hGWedAixePgnpL5qIgGQ8mWj2BKR3CpAAv1iCDDR5XcZwMJDAUxWl8Kk=
  - secure: Mqvkhgqqa1kxhaxKsN9Pk9xDPaa7fuh3zmdumM1sTuePPo5KFzzUdfDNfbWGGPSrxI2qyRIktqB+iLBtgA5g3vmvoed5ARSAPiUwHnZD6hvowL9aKeRJ5IJMMdmUChTueSOi6Md2zTAPWVOA0c0qyhXqR1q3MOlWJ3MIHWZ7SBq4ju42rLxU9pm8p+3dy4KlBoK0qGbYbAVxTkhAtOYjaFtgk8PTXGlrG8qA7yWz99wYe4yFsqeISx6bk/FJEKB7pgC+yVNqe+OIYbWhh2fXZgmlI///hPdI7RbJThurY/A7APs688UK2LxydBoRDu7nlc7H94V6vSxZab7R24oD2qmVIbfi/um5BDM5uYil4tV2RDu0/cQb5IYZ5bnAopP6cP8xnfgmRWnZrSTLvZI/1jDQXOR7/xNTeC+23bMtjU8dJ+ESq0CFF+BUvrVUXx+QCyu7UsQkuoKmCrskh1AkZPYV/Rgd4yULLYgUUZ/bEOgtGNt7Br2JXq1YujSyHSNe5NSXjySW6FaTPdv8UqI16p62lOCzYDUVxxSJu9DVlIcooMC3O1Qkr8gVN1B0o3nJRvIF2Rzax73FMLE34niqPAIgQCap7otJE7hh1b2qJN75Zn8mNGhEo9iaD+XHkcP81CuI6BfgKu7TEWSZIdIffxpsxxtWQmYNvVsms2ys4Rk=
before_install:
- npm install -g redoc-cli@0.6.1
- pip install --user pip --upgrade
- pip install --user awscli --upgrade
- export PATH=$HOME/.local/bin:$PATH
- export $AWS_ACCESS_KEY_ID
- export $AWS_SECRET_ACCESS_KEY
- export $AWS_DEFAULT_REGION
script:
- redoc-cli bundle openapi.yaml --output build/index.html --title "Brave New Coin
  API documentation" --template template.hbs --options.expandResponses=all --options.noAutoAuth
  --options.theme.colors.primary.main=#333F48 --options.theme.typography.links.color=#32329f
  --options.theme.typography.links.visited=#32329f --options.theme.typography.headings.fontFamily='Lato,
  sans-serif'
- cp -R images build/
cache:
  directories:
  - node_modules
deploy:
  provider: s3
  bucket: docs.bravenewcoin.com
  skip_cleanup: true
  region: "$AWS_DEFAULT_REGION"
  local_dir: build
  acl: public_read
  access_key_id: "$AWS_ACCESS_KEY_ID"
  secret_access_key: "$AWS_SECRET_ACCESS_KEY"
  on:
    branch: master
after_deploy:
- aws cloudfront create-invalidation --distribution-id $CF_DISTRIBUTION_ID
notifications:
  slack:
    secure: AptXFEUQSTTPD5F/E82hMJslA9nk1cOUQOutic2xGDHy9UgTvfilPRuaRU8ERSOSQMdmIi38LXBK9dMOtkIx+pUaR2hKkejWi98pmVAjCujw4MHVfouOklGrqb+6vNETh/ZmD9QB/J8XM77f4O4pkISE4cg0GWf1ngK4L8Uwrgti/6ty5FdDoj15OvzoHHvQFLukXEEIUFKVoOzn3jUespiapGDOzBWCJIRIWjo59NLK+7YvAgsxTcfNTvdAWxIL0IIe1kXhHHQGHLA75SR3wvxY/+ffu6vcUlHIiQDmhDwE+kY8q9Yo3nE3wUpKJPzAv1jE5JhUCwLALuad04ghYtGbsge2NSZTKSDzVH1ecyCR1fUAbvbyq+KDrm3AlfGBeI1Jme5+xNKNVS6FvybxBMqHHSFHSl62G9v2xKoZZMR/MAO6Nz0RrOseq68Yz/PeT+O3jUPz3dmLjrr8ZVv4Mu0seSbVFhiN27Wr5qoObwHwdWRDPWoiKzORxiKY9sC4JkZoMcVV974I7p6rM9fQJCDFl5v9XUT7knY3QB5OACzsmh6nXOAVsR/CIPNEXrauWIkeRj2vEJKsvN+0MVzHvaaFBH0VDQfvL5jpWxWR0eNvEI/5jSA+i0h+EU9nstnFHEAz6ChRrmunojIW5g8gEilfXq4g60VdMzzbxHgZpu4=
